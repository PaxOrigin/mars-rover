<!doctype html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mars Rover Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

</head>

<body>
    <div class="text-center">
        <h1 class="display-1">Mars Rover</h1>
    </div>
    <div class="container-lg" id="input-container">
        <div class="input-group mb-3" id="input-container-row">
            <input id="grid-width" type="number" class="form-control" placeholder="3" value="3" aria-label="width">
            <input id="grid-height" type="number" class="form-control" placeholder="3" value="3" aria-label="Height">
            <button id="start-button" type="button" class="btn btn-outline-primary" aria-label="Start">Start</button>
        </div>
    </div>
    <container class="container text-center" id="grid-container">

    </container>
    <script>
        //  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity = "sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin = "anonymous"

        class playerClass {
            x = 0;
            y = 0;
            constructor(x, y) {
                this.x = x;
                this.y = y;
            }

            setPosition(x, y) {
                this.x = x;
                this.y = y;
            }
        }

        const inputFieldContainer = document.getElementById("input-container");
        const inputFieldRowContainer = inputFieldContainer.querySelector("#input-container-row");
        const startButton = inputFieldRowContainer.querySelector("#start-button");
        const numberOfColumns = inputFieldRowContainer.querySelector("#grid-width");
        const numberOfRows = inputFieldRowContainer.querySelector("#grid-height");
        const grid = document.querySelector("#grid-container");
        let gridMatrix = [];
        let gridRowContainer = [];
        const player = new playerClass(0, 0);


        const setInitialPosition = () => {
            let x = Number(Math.round(Math.random() * (numberOfColumns.value - 1)));
            let y = Number(Math.round(Math.random() * (numberOfRows.value - 1)));
            player.setPosition(x, y);
            console.log(`x: ${player.x}   y: ${player.y}`);
            console.log(x + " " + y);
            console.log(numberOfColumns.value);
            console.log(numberOfRows.value);
        }

        const fillGridMatrix = () => {
            for (let row = 0; row < numberOfRows.value; row++) {
                gridMatrix[row] = []
                for (let column = 0; column < numberOfColumns.value; column++) {
                    gridMatrix[row][column] = 0;
                }
            }
            gridMatrix[player.y][player.x] = 1;
            console.log(gridMatrix);
        }

        const resetStatus = () => {
            grid.innerHTML = "";
        }

        const fillGridContainer = () => {
            console.log("Welcome to the program");
            resetStatus();
            setInitialPosition();
            fillGridMatrix();
            for (let row = 0; row < numberOfRows.value; row++) {
                let rowElement = document.createElement("container");
                rowElement.classList.add("my-row");
                gridRowContainer[row] = []
                for (let column = 0; column < numberOfColumns.value; column++) {
                    gridRowContainer[row][column] = document.createElement("div");
                    gridRowContainer[row][column].classList.add("my-col");
                    gridRowContainer[row][column].textContent = fillGridSpaceWithElement(row, column);
                    rowElement.appendChild(gridRowContainer[row][column]);
                }
                grid.appendChild(rowElement);
            }
        };

        const fillGridSpaceWithElement = (row, column) => {
            if (gridMatrix[row][column] === 0) {
                return "-";
            }
            else if (gridMatrix[row][column] === 1) {
                return "1";
            }
        }

        startButton.addEventListener("click", fillGridContainer);

    </script>

</body>

</html>